# 第2轮内测计划 - 导入和边界条件测试

## 测试目标
基于第1轮测试结果，重点测试：
1. 文件导入功能（新建项目导入、导入到已有项目）
2. 边界条件和异常处理
3. 参数验证

## 测试环境
- **容器内测试**: Docker 容器内执行 Python 测试
- **容器外测试**: 通过 localhost:20425 端口访问应用

## 测试范围

### 1. 导入功能测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| IMP001 | 扫描下载目录 | 返回项目列表 | P0 |
| IMP002 | 新建项目导入文件 | 导入成功，项目创建 | P0 |
| IMP003 | 导入到已有项目 | 文件添加到现有项目 | P0 |
| IMP004 | 导入不存在的文件夹 | 返回错误 | P1 |
| IMP005 | 导入不存在的文件 | 返回错误 | P1 |

### 2. 项目创建边界测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| BND001 | 创建项目 - 空标题 | 验证前端/后端处理 | P1 |
| BND002 | 创建项目 - 特殊字符 | 正确处理 | P1 |
| BND003 | 创建项目 - 过长标题 | 截断或报错 | P1 |
| BND004 | 创建项目 - 重复数据 | 允许或合理报错 | P2 |

### 3. 文件操作边界测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| BND005 | 删除空文件列表 | 返回错误 | P1 |
| BND006 | 下载空文件列表 | 返回错误 | P1 |
| BND007 | 下载不存在的文件ID | 返回错误 | P1 |
| BND008 | 删除不存在的文件ID | 返回错误或成功 | P1 |

### 4. 筛选条件测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| FIL001 | 空筛选条件 | 返回全部 | P0 |
| FIL002 | 单个项目ID筛选 | 返回匹配项目 | P0 |
| FIL003 | 多个项目ID筛选 | 返回匹配项目 | P0 |
| FIL004 | 无效项目ID筛选 | 返回空列表 | P1 |
| FIL005 | 混合类型筛选 | 正确筛选 | P0 |

### 5. 字段验证测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| FLD001 | 必填字段缺失 | 验证错误处理 | P1 |
| FLD002 | 字段类型错误 | 验证错误处理 | P1 |
| FLD003 | 枚举字段无效值 | 验证错误处理 | P1 |
| FLD004 | 关联字段无效值 | 验证错误处理 | P1 |

### 6. 并发和性能测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| PER001 | 快速连续请求 | 无竞态问题 | P2 |
| PER002 | 大数据量查询 | 响应时间合理 | P2 |

## 测试数据准备

### 测试文件夹
```python
test_folders = [
    "/bio/downloads/test_import",  # 测试导入
    "/bio/downloads/test_project", # 测试项目
]
```

### 测试项目
```python
test_raw_project = {
    "raw_title": "Round2测试_边界条件",
    "raw_type": "mRNAseq",
    "raw_species": "Homo sapiens",
    "raw_tissue": "Brain"
}
```

## 执行步骤

### 阶段1: 容器内测试
```bash
docker exec -e CONTAINER_TEST=1 biodata-manager bash -c "cd /app && python3 test_round2_import_boundary.py"
```

### 阶段2: 容器外测试
```bash
cd /home/hrply/software/bioscience/research/biodata_manager
python3 test_round2_import_boundary.py
```

## 通过标准
- 所有 P0 测试用例通过
- 无 500 服务器错误
- 边界条件处理正确
- 错误提示友好

## 第1轮问题回顾
1. ✓ 页面路由正常
2. ✓ 项目API正常
3. ✓ 文件管理API正常
4. ✓ 元数据API正常
5. ✓ 扫描API正常
6. ⚠ 测试代码字段名验证修复（results_id）

---

**计划制定日期**: 2026-01-25
**测试轮次**: 第2轮
**基于**: 第1轮测试结果优化
