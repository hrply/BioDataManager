# 第3轮内测计划 - 回归测试

## 测试目标
综合回归测试，验证所有功能正常工作，确认前两轮发现的问题无回归。

## 测试环境
- **容器内测试**: Docker 容器内执行 Python 测试
- **容器外测试**: 通过 localhost:20425 端口访问应用

## 测试范围

### 1. 全量API回归测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| REG001 | 所有页面路由 | 返回200 | P0 |
| REG002 | 项目API完整流程 | 正常响应 | P0 |
| REG003 | 文件管理API完整流程 | 正常响应 | P0 |
| REG004 | 元数据API完整流程 | 正常响应 | P0 |
| REG005 | 扫描API完整流程 | 正常响应 | P0 |

### 2. 前端DOM结构测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| DOM001 | 首页Bootstrap加载 | 无JS错误 | P0 |
| DOM002 | 文件管理页面结构 | 筛选器+表格正常 | P0 |
| DOM003 | 原始数据页面结构 | 项目列表正常 | P0 |
| DOM004 | 结果数据页面结构 | 项目列表正常 | P0 |
| DOM005 | Bootstrap样式完整性 | 无CSS错误 | P0 |

### 3. 关键功能回归验证
| 用例编号 | 测试场景 | 关联问题 | 预期结果 |
|---------|---------|---------|---------|
| REG006 | created_at格式处理 | 第1轮修复 | 正常显示日期 |
| REG007 | 元数据逗号规范化 | 历史修复 | 正确处理中英文逗号 |
| REG008 | 数据库UTF-8编码 | 历史修复 | 中文正确存储 |
| REG009 | 项目ID排序函数 | 历史修复 | 正确排序 |
| REG010 | 防抖机制 | 历史修复 | 正常加载数据 |

### 4. 错误处理回归测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| ERR001 | 500错误处理 | 不崩溃 | P0 |
| ERR002 | 参数验证错误 | 返回400 | P0 |
| ERR003 | 资源不存在 | 返回404 | P0 |
| ERR004 | 网络超时处理 | 合理超时 | P1 |

### 5. 数据完整性测试
| 用例编号 | 测试场景 | 预期结果 | 优先级 |
|---------|---------|---------|--------|
| DAT001 | 项目创建后查询 | 数据一致 | P0 |
| DAT002 | 批量查询数据完整性 | 无数据丢失 | P0 |
| DAT003 | 时间字段格式统一 | 格式一致 | P1 |

## 第2轮问题跟进
| 问题 | 状态 | 说明 |
|------|------|------|
| 导入API返回project_id为null | 待分析 | 需检查API响应格式 |

## 执行步骤

### 阶段1: 容器内测试
```bash
docker exec -e CONTAINER_TEST=1 biodata-manager bash -c "cd /app && python3 test_round3_regression.py"
```

### 阶段2: 容器外测试
```bash
cd /home/hrply/software/bioscience/research/biodata_manager
python3 test_round3_regression.py
```

## 通过标准
- 所有 P0 测试用例通过
- 无 500 服务器错误
- 前端无 JavaScript 错误
- 数据完整性验证通过

## 输出产物
- 测试执行日志
- 问题清单
- 回归测试报告

---

**计划制定日期**: 2026-01-25
**测试轮次**: 第3轮
**测试类型**: 回归测试
