# BioData Manager åº”ç”¨åŠŸèƒ½è®¾è®¡æ–‡æ¡£

## ä¸€ã€ç³»ç»Ÿæ¦‚è¿°

BioData Manager æ˜¯ä¸€ä¸ªç”Ÿç‰©ä¿¡æ¯å­¦æ•°æ®ç®¡ç†ç³»ç»Ÿï¼Œç”¨äºç®¡ç†åŸå§‹æµ‹åºæ•°æ®ã€åˆ†æç»“æœå’Œç›¸å…³å…ƒæ•°æ®ã€‚é‡‡ç”¨ **Python Flask + Jinja2 + Bootstrap 5** æŠ€æœ¯æ ˆï¼Œæä¾›å®Œæ•´çš„é¡¹ç›®ç®¡ç†ã€æ–‡ä»¶ç®¡ç†å’Œå…ƒæ•°æ®é…ç½®åŠŸèƒ½ã€‚

## äºŒã€æŠ€æœ¯é€‰å‹

| ç±»åˆ« | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| åç«¯æ¡†æ¶ | Flask 3.x | Python Web æ¡†æ¶ |
| æ¨¡æ¿å¼•æ“ | Jinja2 | Flask æ¨¡æ¿æ¸²æŸ“ |
| å‰ç«¯ UI | Bootstrap 5 | æœ¬åœ°åŒ– CSS/JS |
| æ•°æ®åº“ | MySQL 8.x | ä¸»æ•°æ®å­˜å‚¨ |
| HTTP å®¢æˆ·ç«¯ | jQuery AJAX | å¼‚æ­¥è¯·æ±‚å¤„ç† |
| æ–‡ä»¶å¤„ç† | Python os/shutil | æœ¬åœ°æ–‡ä»¶ç®¡ç† |

## ä¸‰ã€ç³»ç»Ÿæ¶æ„

### 3.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æµè§ˆå™¨ (Browser)                          â”‚
â”‚                                                                     â”‚
â”‚    Bootstrap 5 + Jinja2 æ¨¡æ¿ + jQuery AJAX                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚  åŸå§‹æ•°æ®  â”‚  ç»“æœç®¡ç†  â”‚  æ–‡ä»¶ç®¡ç†  â”‚  å…ƒæ•°æ®ç®¡ç†       â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚ HTTP è¯·æ±‚/å“åº”
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Python Flask åº”ç”¨ (server.py)                   â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  é¡µé¢è·¯ç”±    â”‚  â”‚  ä¸šåŠ¡é€»è¾‘   â”‚  â”‚  API æ¥å£   â”‚               â”‚
â”‚   â”‚ /raw-data   â”‚  â”‚ Backend     â”‚  â”‚ /api/*      â”‚               â”‚
â”‚   â”‚ /results    â”‚  â”‚ Manager     â”‚  â”‚             â”‚               â”‚
â”‚   â”‚ /files      â”‚  â”‚             â”‚  â”‚             â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚              DatabaseManager (è¿æ¥æ± ç®¡ç†)                    â”‚   â”‚
â”‚   â”‚         mysql.connector.pooling.MySQLConnectionPool         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚ SQL (MySQL)
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MySQL 8.4 æ•°æ®åº“                             â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚field_config â”‚ â”‚raw_project  â”‚ â”‚select_options              â”‚  â”‚
â”‚   â”‚(å­—æ®µé…ç½®)   â”‚ â”‚(åŸå§‹æ•°æ®)   â”‚ â”‚(ä¸‹æ‹‰é€‰é¡¹)                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚result_projectâ”‚ â”‚file_record  â”‚ â”‚abbr_mapping                â”‚  â”‚
â”‚   â”‚(ç»“æœæ•°æ®)   â”‚ â”‚(æ–‡ä»¶è®°å½•)   â”‚ â”‚(ç¼©å†™æ˜ å°„)                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 è¿æ¥æ± æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DatabaseManager è¿æ¥æ± æ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   Flask è¯·æ±‚         è¯·æ±‚å¤„ç†          è¿æ¥æ± æ“ä½œ                     â”‚
â”‚                                                                     â”‚
â”‚   è¯·æ±‚A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º get_connection() â”€â”€â–º ä»æ± è·å–è¿æ¥ #1           â”‚
â”‚                       â”‚                    â”‚                         â”‚
â”‚                       â–¼                    â–¼                         â”‚
â”‚                   query()              æ‰§è¡Œ SQL                      â”‚
â”‚                       â”‚                    â”‚                         â”‚
â”‚                       â–¼                    â–¼                         â”‚
â”‚                   finally: â”€â”€â–º connection.close() å½’è¿˜è¿æ¥          â”‚
â”‚                       â”‚                                              â”‚
â”‚   è¯·æ±‚B â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º get_connection() â”€â”€â–º ä»æ± è·å–è¿æ¥ #2           â”‚
â”‚                       â”‚                    â”‚                         â”‚
â”‚                       â–¼                    â–¼                         â”‚
â”‚                   execute()             æ‰§è¡Œ SQL                      â”‚
â”‚                       â”‚                    â”‚                         â”‚
â”‚                       â–¼                    â–¼                         â”‚
â”‚                   finally: â”€â”€â–º connection.close() å½’è¿˜è¿æ¥          â”‚
â”‚                                                                     â”‚
â”‚   è¿æ¥æ± é…ç½®: pool_size=20, pool_reset_session=True                 â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å››ã€ç›®å½•ç»“æ„

```
app/
â”œâ”€â”€ server.py              # Flask ä¸»åº”ç”¨ + é¡µé¢è·¯ç”± + API æ¥å£
â”œâ”€â”€ backend.py             # ä¸šåŠ¡é€»è¾‘å±‚ (BioDataManager)
â”œâ”€â”€ database_mysql.py      # æ•°æ®åº“ç®¡ç† (DatabaseManager + è¿æ¥æ± )
â”œâ”€â”€ citation_parser.py     # å¼•æ–‡è§£ææ¨¡å— (BibTeX/RIS/ENW)
â”œâ”€â”€ init_db.py             # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ metadata_config_manager_mysql.py  # å…ƒæ•°æ®é…ç½®ç®¡ç†
â”œâ”€â”€ field_names.py         # å­—æ®µåç§°å®šä¹‰
â”‚
â”œâ”€â”€ templates/             # Jinja2 æ¨¡æ¿
â”‚   â”œâ”€â”€ base.html          # åŸºç¡€æ¨¡æ¿ (å¯¼èˆªã€æ ·å¼ã€AJAX å°è£…)
â”‚   â”œâ”€â”€ index.html         # é¦–é¡µ/ä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ raw_data.html      # åŸå§‹æ•°æ®é¡µé¢
â”‚   â”œâ”€â”€ results.html       # ç»“æœç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ files.html         # æ–‡ä»¶ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ metadata.html      # å…ƒæ•°æ®ç®¡ç†é¡µé¢
â”‚   â””â”€â”€ error.html         # é”™è¯¯é¡µé¢
â”‚
â”œâ”€â”€ static/                # é™æ€æ–‡ä»¶ (æœ¬åœ°åŒ–)
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ bootstrap.min.css
â”‚   â”‚   â””â”€â”€ bootstrap-icons.css
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ bootstrap.bundle.min.js
â”‚       â””â”€â”€ jquery.min.js
â”‚
â””â”€â”€ docker-entrypoint.sh   # Docker å…¥å£è„šæœ¬
```

## äº”ã€æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 5.1 æ•°æ®åº“ç®¡ç†æ¨¡å— (database_mysql.py)

#### 5.1.1 DatabaseManager ç±»

```python
class DatabaseManager:
    """æ•°æ®åº“ç®¡ç†å™¨ - ä½¿ç”¨è¿æ¥æ± æ”¯æŒå¹¶å‘è¯·æ±‚"""
    
    _pool = None          # ç±»çº§åˆ«è¿æ¥æ± 
    _pool_lock = None     # çº¿ç¨‹å®‰å…¨é”
    
    def __init__(self):
        """åˆå§‹åŒ–"""
        self.connection = None
        self.config = self._load_config()
    
    def get_connection(self):
        """ä»è¿æ¥æ± è·å–è¿æ¥ (ä¸ç¼“å­˜å®ä¾‹å˜é‡)"""
        if self._pool:
            return self._pool.get_connection()
        return None
    
    def query(self, query, params=None):
        """æŸ¥è¯¢å¤šæ¡è®°å½• (è‡ªåŠ¨è·å–/å½’è¿˜è¿æ¥)"""
        connection = self.get_connection()
        if connection is None:
            return []
        
        cursor = None
        try:
            cursor = connection.cursor()
            cursor.execute(query, params)
            return cursor.fetchall()
        except Error as e:
            print(f"æŸ¥è¯¢å¤±è´¥: {e}")
            return []
        finally:
            if cursor:
                cursor.close()
            if connection:
                connection.close()
```

#### 5.1.2 è¿æ¥æ± é…ç½®

```python
cls._pool = pooling.MySQLConnectionPool(
    pool_name="biodata_pool",
    pool_size=20,              # æ”¯æŒ 20 ä¸ªå¹¶å‘è¿æ¥
    pool_reset_session=True,   # é‡ç½®ä¼šè¯çŠ¶æ€
    **config
)
```

#### 5.1.3 è¿æ¥ç”Ÿå‘½å‘¨æœŸ

```
è¯·æ±‚è¿›å…¥
    â”‚
    â–¼
get_connection() â”€â”€â”€â”€â”€â”€â–º ä»è¿æ¥æ± è·å–è¿æ¥
    â”‚
    â–¼
æ‰§è¡Œ SQL (query/execute)
    â”‚
    â–¼
finally:
    cursor.close()    â”€â”€â”€â”€â–º å…³é—­æ¸¸æ ‡
    connection.close() â”€â”€â”€â”€â–º å½’è¿˜è¿æ¥åˆ°æ± 
    â”‚
    â–¼
è¯·æ±‚å®Œæˆ
```

**å…³é”®åŸåˆ™**:
- æ¯ä¸ªæ•°æ®åº“æ“ä½œéƒ½ç‹¬ç«‹è·å–/å½’è¿˜è¿æ¥
- ä¸åœ¨å®ä¾‹å˜é‡ä¸­ç¼“å­˜è¿æ¥
- å§‹ç»ˆåœ¨ finally å—ä¸­é‡Šæ”¾èµ„æº

### 5.2 ä¸šåŠ¡é€»è¾‘æ¨¡å— (backend.py)

#### 5.2.1 BioDataManager ç±»

```python
class BioDataManager:
    """ç”Ÿç‰©æ•°æ®ä¸šåŠ¡ç®¡ç†å™¨"""
    
    def __init__(self, db_manager, config_manager):
        self.db_manager = db_manager
        self.config_manager = config_manager
    
    def get_all_raw_projects(self):
        """è·å–æ‰€æœ‰åŸå§‹æ•°æ®é¡¹ç›®"""
        return self.db_manager.query("""
            SELECT * FROM raw_project ORDER BY created_at DESC
        """)
    
    def get_all_result_projects(self):
        """è·å–æ‰€æœ‰ç»“æœæ•°æ®é¡¹ç›®"""
        return self.db_manager.query("""
            SELECT * FROM result_project ORDER BY created_at DESC
        """)
    
    def create_raw_project(self, data):
        """åˆ›å»ºåŸå§‹æ•°æ®é¡¹ç›®"""
        raw_id = f"RAW_{uuid.uuid4().hex[:8].upper()}"
        # ... æ’å…¥æ•°æ®
        return raw_id
```

### 5.3 Flask åº”ç”¨æ¨¡å— (server.py)

#### 5.3.1 å•ä¾‹æ¨¡å¼ç®¡ç†å™¨

```python
_db_manager = None
_config_manager = None
_manager = None

def get_db_manager():
    """è·å–æ•°æ®åº“ç®¡ç†å™¨ (å»¶è¿Ÿåˆå§‹åŒ–)"""
    global _db_manager
    if _db_manager is None:
        _db_manager = DatabaseManager()
    return _db_manager
```

#### 5.3.2 é¡µé¢è·¯ç”±

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/` | é¦–é¡µ |
| GET | `/raw-data` | åŸå§‹æ•°æ®åˆ—è¡¨ |
| GET | `/results` | ç»“æœç®¡ç†åˆ—è¡¨ |
| GET | `/files` | æ–‡ä»¶ç®¡ç† |
| GET | `/metadata` | å…ƒæ•°æ®é…ç½® |

#### 5.3.3 API è·¯ç”±

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/projects` | è·å–é¡¹ç›®åˆ—è¡¨ |
| GET | `/api/projects?table=result` | è·å–ç»“æœé¡¹ç›® |
| POST | `/api/projects` | åˆ›å»ºé¡¹ç›® |
| DELETE | `/api/projects/<type>/<id>` | åˆ é™¤é¡¹ç›® |
| GET | `/api/metadata/config` | è·å–å…ƒæ•°æ®é…ç½® |
| POST | `/api/files/scan` | æ‰«æç›®å½• |
| POST | `/api/files/import` | å¯¼å…¥æ–‡ä»¶ |

### 5.4 å‰ç«¯æ¨¡å— (templates/)

#### 5.4.1 åŸºç¡€æ¨¡æ¿ (base.html) - AJAX å°è£…

```javascript
// è¿æ¥æ± ç›¸å…³é…ç½®
const AJAX_POOL = {
    getDebounceMs: 200,    // GET è¯·æ±‚é˜²æŠ–é—´éš”
    postDebounceMs: 500,   // POST/PUT/DELETE é˜²æŠ–é—´éš”
    pending: new Map()     // å¾…å¤„ç†è¯·æ±‚
};

// é˜²æŠ–å‡½æ•°
function debounce(fn, delay) {
    return function(...args) {
        const key = `${fn.name}_${JSON.stringify(args)}`;
        if (AJAX_POOL.pending.has(key)) {
            return AJAX_POOL.pending.get(key);
        }
        const promise = new Promise((resolve) => {
            setTimeout(() => {
                AJAX_POOL.pending.delete(key);
                resolve(fn.apply(this, args));
            }, delay);
        });
        AJAX_POOL.pending.set(key, promise);
        return promise;
    };
}

// API è°ƒç”¨å°è£…
const apiGet = debounce(function(url, params = {}) {
    return $.get(url, params);
}, AJAX_POOL.getDebounceMs);

const apiPost = debounce(function(url, data = {}) {
    return $.ajax({
        url: url,
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(data)
    });
}, AJAX_POOL.postDebounceMs);
```

#### 5.4.2 å‰ç«¯åŠ è½½æµç¨‹

```
é¡µé¢åŠ è½½ (base.html)
    â”‚
    â–¼
$(document).ready()
    â”‚
    â”œâ”€â”€â–º åˆå§‹åŒ–å·¥å…·æç¤º
    â”‚
    â””â”€â”€â–º é¡µé¢ç‰¹å®šåˆå§‹åŒ– (raw_data.html / results.html)
            â”‚
            â”œâ”€â”€â–º apiGet('/api/metadata/config')
            â”‚        â”‚
            â”‚        â–¼
            â”‚    æ¸²æŸ“ç­›é€‰ä¸‹æ‹‰æ¡†
            â”‚
            â”œâ”€â”€â–º apiGet('/api/projects?table=xxx')
            â”‚        â”‚
            â”‚        â–¼
            â”‚    æ¸²æŸ“æ•°æ®è¡¨æ ¼
            â”‚
            â””â”€â”€â–º ç»‘å®šäº‹ä»¶å¤„ç†å™¨
                    â”‚
                    â–¼
                ç”¨æˆ·äº¤äº’ (ç­›é€‰/åˆ·æ–°/ç¼–è¾‘)
                    â”‚
                    â””â”€â”€â–º é˜²æŠ–æ§åˆ¶ â†’ AJAX è¯·æ±‚
```

## å…­ã€æ•°æ®åº“è®¾è®¡

### 6.1 æ•°æ®è¡¨ç»“æ„

| è¡¨å | è¯´æ˜ | æ ¸å¿ƒå­—æ®µ |
|------|------|----------|
| `field_config` | å…ƒæ•°æ®å­—æ®µé…ç½® | field_id, field_name, field_type, field_table, **field_readonly** |
| `raw_project` | åŸå§‹æ•°æ®é¡¹ç›® | raw_id, raw_title, raw_type, raw_species |
| `result_project` | ç»“æœæ•°æ®é¡¹ç›® | results_id, results_title, results_type, results_raw |
| `file_record` | æ–‡ä»¶è®°å½• | file_name, file_path, file_project_type, file_project_id |
| `select_options` | ä¸‹æ‹‰é€‰é¡¹ | option_type, option_value, option_label |
| `abbr_mapping` | ç¼©å†™æ˜ å°„ | field_id, full_name, abbr_name |

> **field_readonly å­—æ®µè¯´æ˜**: ç”¨äºæ§åˆ¶å­—æ®µæ˜¯å¦å¯ç¼–è¾‘ã€‚`0` = å¯ç¼–è¾‘ï¼Œ`1` = åªè¯»ï¼ˆç³»ç»Ÿè‡ªåŠ¨ç®¡ç†ï¼‰ã€‚ç³»ç»Ÿåœ¨å¯¼å…¥æ–‡ä»¶æ—¶ä¼šè‡ªåŠ¨æ›´æ–° `raw_file_count`ã€`raw_total_size`ã€`results_file_count`ã€`results_total_size` ç­‰ç»Ÿè®¡å­—æ®µï¼Œè¿™äº›å­—æ®µæ ‡è®°ä¸ºåªè¯»ã€‚

### 6.2 å­—æ®µç±»å‹æ˜ å°„

| field_type å€¼ | å‰ç«¯ç»„ä»¶ | è¯´æ˜ |
|---------------|----------|------|
| `text` | `<input type="text">` | å•è¡Œæ–‡æœ¬ |
| `textarea` | `<textarea>` | å¤šè¡Œæ–‡æœ¬ |
| `select` | `<select>` | é€‰æ‹©ä¸‹æ‹‰ |

**ä¸‹æ‹‰æ¡†è¡Œä¸ºæ¨¡å¼**ï¼š
- **æ–°å»ºé¡¹ç›®/ç¼–è¾‘é¡¹ç›®**ï¼šä½¿ç”¨ `multi_select` æ¨¡å¼ï¼ˆå¯å¤šé€‰ï¼Œç”¨é€—å·åˆ†éš”å­˜å‚¨ï¼‰
- **æ–‡ä»¶å¯¼å…¥**ï¼šä½¿ç”¨ `single_select` æ¨¡å¼ï¼ˆä»…å•é€‰ï¼‰

### 6.3 ç¯å¢ƒå˜é‡é…ç½®

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|----------|------|--------|
| `METADATA_FIELDS_NEW_RAW` | æ–°å»ºåŸå§‹æ•°æ®é¡¹ç›®æ—¶æ˜¾ç¤ºçš„å­—æ®µç¼–å· | `3,4,5,6,7` |
| `METADATA_FIELDS_EXIST_RAW` | å¯¼å…¥åˆ°å·²æœ‰åŸå§‹æ•°æ®é¡¹ç›®æ—¶æ˜¾ç¤ºçš„å­—æ®µç¼–å· | `3,4,5,6,7` |
| `METADATA_FIELDS_NEW_RESULT` | æ–°å»ºç»“æœé¡¹ç›®æ—¶æ˜¾ç¤ºçš„å­—æ®µç¼–å· | `3,4,5` |
| `METADATA_FIELDS_EXIST_RESULT` | å¯¼å…¥åˆ°å·²æœ‰ç»“æœé¡¹ç›®æ—¶æ˜¾ç¤ºçš„å­—æ®µç¼–å· | `3,4,5` |

> **è¯´æ˜**: å­—æ®µç¼–å·å¯¹åº” `field_config` è¡¨ä¸­çš„ `field_seq` å­—æ®µï¼Œå¤šä¸ªç¼–å·ç”¨é€—å·åˆ†éš”ã€‚é…ç½®åéœ€é‡å¯æœåŠ¡ç”Ÿæ•ˆã€‚

## ä¸ƒã€åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡

### 7.1 åŸå§‹æ•°æ®ç®¡ç†

#### åŠŸèƒ½ç‰¹æ€§
- é¡¹ç›®åˆ—è¡¨å±•ç¤ºä¸åˆ†é¡µ
- å¤šæ¡ä»¶ç­›é€‰ (æ•°æ®ç±»å‹ã€ç‰©ç§ã€ç»„ç»‡æ¥æºç­‰)
- é¡¹ç›®è¯¦æƒ…æŸ¥çœ‹ (å¼¹çª—å±•ç¤º)
- æ–°å»º/ç¼–è¾‘/åˆ é™¤é¡¹ç›®
- æ–‡çŒ®å¼•ç”¨æ–‡ä»¶å¯¼å…¥ (.bib/.ris/.enw)

#### é¡¹ç›®ç¼–å·è§„åˆ™
```
æ ¼å¼: {TYPE}_{8ä½UUID}

TYPE:
- åŸå§‹æ•°æ®: RAW
- ç»“æœæ•°æ®: RES

ç¤ºä¾‹:
- RAW_L22Y86D7
- RES_A1B2C3D4

UUIDè§„åˆ™:
- å­—ç¬¦é›†: 0-9, A-Z, a-z (å…±62ä¸ªå­—ç¬¦)
- é•¿åº¦: 8ä½
- ç”± backend.py çš„ generate_project_id() ç”Ÿæˆ
```

#### é¡µé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŸå§‹æ•°æ®                                    [æ–°å»ºåŸå§‹æ•°æ®é¡¹ç›®] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç­›é€‰æ¡ä»¶:                                                          â”‚
â”‚  [æ•°æ®ç±»å‹ â–¼] [ç‰©ç§ â–¼] [ç»„ç»‡æ¥æº â–¼]  [é‡ç½®] [åº”ç”¨ç­›é€‰]          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ # â”‚ é¡¹ç›®ç¼–å·   â”‚ æ•°æ®ç±»å‹ â”‚ ç‰©ç§  â”‚ åˆ›å»ºæ—¶é—´ â”‚ æ“ä½œ    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 1 â”‚ RAW_L22Y86D7 â”‚ RNA-Seq  â”‚ äººç±»  â”‚ 2026-01  â”‚ [æŸ¥çœ‹]  â”‚   â”‚
â”‚  â”‚   â”‚           â”‚          â”‚       â”‚          â”‚ [åˆ é™¤]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  å…± X æ¡è®°å½•  [< 1 2 3 >]  æ¯é¡µ [10 â–¼] æ¡                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 ç»“æœæ•°æ®ç®¡ç†

ä¸åŸå§‹æ•°æ®ç®¡ç†åŠŸèƒ½ç›¸åŒï¼Œé’ˆå¯¹ `result_project` è¡¨è¿›è¡Œç®¡ç†ã€‚

#### ç‰¹æœ‰åŠŸèƒ½
- å…³è”åŸå§‹æ•°æ®é¡¹ç›® (`results_raw` å­—æ®µï¼Œæ”¯æŒé€—å·åˆ†éš”å¤šä¸ªé¡¹ç›®ç¼–å·)
- ç»“æœç±»å‹åˆ†ç±» (DEAã€Markerã€Enrichmentã€PPIã€Network ç­‰)

#### å…³è”é¡¹ç›®ç¼–å·å¤„ç†è§„åˆ™
- `results_raw` å­—æ®µæ”¯æŒé€—å·åˆ†éš”è¾“å…¥å¤šä¸ªåŸå§‹é¡¹ç›®ç¼–å·ï¼ˆä¸­è‹±æ–‡é€—å·éƒ½è¯†åˆ«ï¼‰
- å¤šä¸ªé¡¹ç›®ç¼–å·æŒ‰ ASCII å­—æ¯é¡ºåºæ’åºåç›´æ¥ç»„åˆï¼ˆæ— åˆ†éš”ç¬¦ï¼‰
- å­˜å‚¨è·¯å¾„ç¤ºä¾‹: `/bio/results/RES_X1Y2Z3/DEA/RAW_A1RAW_B2RAW_C3/`
- å¯¼å…¥æ—¶å¦‚å¡«å†™å¤šä¸ªå…³è”é¡¹ç›®ï¼Œç³»ç»Ÿè‡ªåŠ¨å¤„ç†æ’åºå’Œè·¯å¾„ç”Ÿæˆ

### 7.3 æ–‡ä»¶ç®¡ç† - ç®¡ç†é¡µé¢

#### åŠŸèƒ½æ¦‚è¿°

æ–‡ä»¶ç®¡ç†-ç®¡ç†é¡µé¢æä¾›æ–‡ä»¶é¡¹ç›®çš„ç­›é€‰ã€æŸ¥çœ‹å’Œæ–‡ä»¶æ“ä½œåŠŸèƒ½ï¼Œé€šè¿‡"ç®¡ç†"å’Œ"å¯¼å…¥"ä¸¤ä¸ªæ ‡ç­¾é¡µåˆ‡æ¢ä¸åŒçš„åŠŸèƒ½æ¨¡å—ã€‚

#### é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–‡ä»¶ç®¡ç†                                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç®¡ç†] [å¯¼å…¥]                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ç­›é€‰æ¡ä»¶                                                             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ [é¡¹ç›®ç±»å‹ â–¼] [é¡¹ç›®ç¼–å·      ]  [æŸ¥è¯¢]                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å·²å¯¼å…¥é¡¹ç›®                                            (å…± X ä¸ªé¡¹ç›®)  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ # â”‚ é¡¹ç›®ç¼–å·     â”‚ é¡¹ç›®åç§° â”‚ é¡¹ç›®ç±»å‹ â”‚ åˆ›å»ºæ—¶é—´ â”‚ æ–‡ä»¶æ•°é‡ â”‚ æ“ä½œ â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 1 â”‚ RAW_XXX     â”‚ é¡¹ç›®A   â”‚ åŸå§‹æ•°æ® â”‚ 2026-01  â”‚ 10      â”‚[è¯¦æƒ…]â”‚   â”‚
â”‚  â”‚ 2 â”‚ RES_YYY     â”‚ é¡¹ç›®B   â”‚ ç»“æœæ•°æ® â”‚ 2026-01  â”‚ 5       â”‚[è¯¦æƒ…]â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  å…± X æ¡è®°å½•  [< 1 2 3 >]  æ¯é¡µ [10 â–¼] æ¡                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ ‡ç­¾é¡µç»“æ„

| æ ‡ç­¾ | åŠŸèƒ½ |
|------|------|
| ç®¡ç† | ç­›é€‰å·²å¯¼å…¥é¡¹ç›®ã€æŸ¥çœ‹é¡¹ç›®è¯¦æƒ…ã€ç®¡ç†æ–‡ä»¶ |
| å¯¼å…¥ | æ‰«æä¸‹è½½ç›®å½•ã€å¯¼å…¥æ–°æ–‡ä»¶ |

#### 7.3.1 ç­›é€‰æ¡ä»¶æ¨¡å—ï¼ˆç®¡ç†æ ‡ç­¾é¡µå†…ï¼‰

##### åŠŸèƒ½æè¿°

æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„é¡¹ç›®ç±»å‹å’Œè¾“å…¥çš„é¡¹ç›®ç¼–å·ï¼Œå‘åå°å‘é€è¯·æ±‚è·å–ç¬¦åˆæ¡ä»¶çš„é¡¹ç›®ä¿¡æ¯ã€‚

##### å‰ç«¯äº¤äº’

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç­›é€‰æ¡ä»¶                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [é¡¹ç›®ç±»å‹ â–¼] [é¡¹ç›®ç¼–å·      ]  [æŸ¥è¯¢]                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é¡¹ç›®ç±»å‹é€‰é¡¹:                                                    â”‚
â”‚   - å…¨éƒ¨ï¼ˆé»˜è®¤ï¼‰                                                  â”‚
â”‚   - åŸå§‹æ•°æ® (raw)                                               â”‚
â”‚   - ç»“æœæ•°æ® (result)                                            â”‚
â”‚                                                                 â”‚
â”‚ é¡¹ç›®ç¼–å·è¾“å…¥:                                                    â”‚
â”‚   - æ”¯æŒé€—å·åˆ†éš”è¾“å…¥å¤šä¸ªé¡¹ç›®ç¼–å·ï¼ˆä¸­è‹±æ–‡é€—å·éƒ½å¯ï¼‰                  â”‚
â”‚   - ä¾‹å¦‚: RAW_XXX, RES_YYY, RAW_ZZZ                              â”‚
â”‚   - ç•™ç©ºåˆ™è¡¨ç¤ºä¸é™åˆ¶é¡¹ç›®ç¼–å·                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### ç­›é€‰é€»è¾‘

**æŸ¥è¯¢æ¡ä»¶ç»„åˆè§„åˆ™ï¼š**
```
æœ€ç»ˆæŸ¥è¯¢ = é¡¹ç›®ç±»å‹æ¡ä»¶ AND (é¡¹ç›®ç¼–å·1 OR é¡¹ç›®ç¼–å·2 OR ...)

ç¤ºä¾‹:
- é¡¹ç›®ç±»å‹=raw, é¡¹ç›®ç¼–å·=RAW_A,RAW_B
  â†’ file_project_type='raw' AND (file_project_id='RAW_A' OR file_project_id='RAW_B')

- é¡¹ç›®ç±»å‹=ç•™ç©º, é¡¹ç›®ç¼–å·=ç•™ç©º
  â†’ è¿”å›æ‰€æœ‰é¡¹ç›® (æ— ç­›é€‰æ¡ä»¶)

- é¡¹ç›®ç±»å‹=raw, é¡¹ç›®ç¼–å·=ç•™ç©º
  â†’ file_project_type='raw'

- é¡¹ç›®ç±»å‹=ç•™ç©º, é¡¹ç›®ç¼–å·=RAW_A,RAW_B
  â†’ (file_project_id='RAW_A' OR file_project_id='RAW_B')
```

| é¡¹ç›®ç±»å‹ | é¡¹ç›®ç¼–å·è¾“å…¥ | ç­›é€‰è¡Œä¸º |
|---------|-------------|---------|
| å…¨éƒ¨ | ç•™ç©º | æ˜¾ç¤ºæ‰€æœ‰é¡¹ç›® |
| åŸå§‹æ•°æ® | ç•™ç©º | æ˜¾ç¤ºæ‰€æœ‰ raw ç±»å‹é¡¹ç›® |
| ç»“æœæ•°æ® | ç•™ç©º | æ˜¾ç¤ºæ‰€æœ‰ result ç±»å‹é¡¹ç›® |
| å…¨éƒ¨ | RAW_A,RAW_B | æ˜¾ç¤ºç¼–å·ä¸º RAW_A æˆ– RAW_B çš„æ‰€æœ‰é¡¹ç›® |
| åŸå§‹æ•°æ® | RAW_A,RAW_B | æ˜¾ç¤º raw ç±»å‹ä¸”ç¼–å·ä¸º RAW_A æˆ– RAW_B çš„é¡¹ç›® |
| ç»“æœæ•°æ® | RAW_A,RAW_B | æ˜¾ç¤º result ç±»å‹ä¸”ç¼–å·ä¸º RAW_A æˆ– RAW_B çš„é¡¹ç›® |

##### å‰ç«¯ä»£ç ç¤ºä¾‹

```javascript
// è§£æé¡¹ç›®ç¼–å·è¾“å…¥ï¼ˆæ”¯æŒä¸­è‹±æ–‡é€—å·ï¼‰
function parseProjectIds(input) {
    if (!input.trim()) return [];
    // æ”¯æŒä¸­æ–‡é€—å·å’Œè‹±æ–‡é€—å·
    return input.split(/[,ï¼Œ]/).map(id => id.trim()).filter(id => id);
}

// åº”ç”¨ç­›é€‰
function applyFilter() {
    const projectType = $('#filter-project-type').val();
    const projectIdInput = $('#filter-project-id').val();
    const projectIds = parseProjectIds(projectIdInput);
    
    apiGet('/api/files/imported-projects', {
        file_project_type: projectType || undefined,
        file_project_ids: projectIds.length > 0 ? projectIds.join(',') : undefined
    }).then(function(res) {
        if (res.success) {
            renderProjectList(res.data);
        }
    });
}

// é‡ç½®ç­›é€‰
function resetFilter() {
    $('#filter-project-type').val('');
    $('#filter-project-id').val('');
    applyFilter(); // åŠ è½½å…¨éƒ¨é¡¹ç›®
}
```

#### 7.3.2 å·²å¯¼å…¥é¡¹ç›®è¡¨æ ¼æ¨¡å—ï¼ˆç®¡ç†æ ‡ç­¾é¡µå†…ï¼‰

##### è¡¨æ ¼å­—æ®µè¯´æ˜

| å­—æ®µ | æ•°æ®åº“æ¥æº | è¯´æ˜ |
|------|-----------|------|
| # | åºå· | è‡ªåŠ¨ç¼–å· |
| é¡¹ç›®ç¼–å· | file_record.file_project_id | æ‰€å±é¡¹ç›®ç¼–å· |
| é¡¹ç›®åç§° | raw_project.raw_title / result_project.results_title | é¡¹ç›®æ ‡é¢˜ |
| é¡¹ç›®ç±»å‹ | file_record.file_project_type | raw / result |
| åˆ›å»ºæ—¶é—´ | raw_project.created_at / result_project.created_at | é¡¹ç›®åˆ›å»ºæ—¶é—´ |
| æ–‡ä»¶æ•°é‡ | raw_project.raw_file_count / result_project.results_file_count | å…³è”æ–‡ä»¶æ•°é‡ |
| æ“ä½œ | - | æŸ¥çœ‹è¯¦æƒ…æŒ‰é’® |

##### æ•°æ®è·å–æµç¨‹

```
ç”¨æˆ·é€‰æ‹©ç­›é€‰æ¡ä»¶
        â”‚
        â–¼
å‰ç«¯å‘é€è¯·æ±‚: GET /api/files/imported-projects
    å‚æ•°: file_project_type?, file_project_ids?
        â”‚
        â–¼
åå°æŸ¥è¯¢ file_record è¡¨è·å–ç¬¦åˆæ¡ä»¶çš„ file_project_id å’Œ file_project_type
        â”‚
        â–¼
æ ¹æ® file_project_type å…³è”æŸ¥è¯¢ raw_project æˆ– result_project
        â”‚
        â–¼
è¿”å›: [{ project_id, project_type, title, created_at, file_count }, ...]
        â”‚
        â–¼
å‰ç«¯æ¸²æŸ“è¡¨æ ¼
```

##### å‰ç«¯ä»£ç ç¤ºä¾‹

```javascript
// åŠ è½½å·²å¯¼å…¥é¡¹ç›®åˆ—è¡¨
function loadImportedProjects() {
    apiGet('/api/files/imported-projects').then(function(res) {
        if (res.success && res.data) {
            renderProjectList(res.data);
        }
    });
}

// æ¸²æŸ“é¡¹ç›®åˆ—è¡¨
function renderProjectList(projects) {
    const tbody = $('#project-list');
    $('#project-count').text(projects.length + ' ä¸ª');
    
    if (projects.length === 0) {
        tbody.html(`
            <tr>
                <td colspan="7" class="text-center py-4 text-muted">
                    <i class="bi bi-inbox fs-4 d-block mb-2"></i>
                    æš‚æ— ç¬¦åˆæ¡ä»¶çš„é¡¹ç›®
                </td>
            </tr>
        `);
        return;
    }
    
    let html = '';
    projects.forEach(function(p, index) {
        const typeLabel = p.project_type === 'raw' ? 'åŸå§‹æ•°æ®' : 'ç»“æœæ•°æ®';
        html += `
            <tr>
                <td>${index + 1}</td>
                <td><code>${p.project_id}</code></td>
                <td>${p.title || '-'}</td>
                <td><span class="badge bg-info">${typeLabel}</span></td>
                <td>${p.created_at || '-'}</td>
                <td>${p.file_count || 0}</td>
                <td>
                    <button class="btn btn-outline-primary btn-sm" 
                            onclick="showProjectDetail('${p.project_id}', '${p.project_type}')">
                        <i class="bi bi-eye"></i> æŸ¥çœ‹
                    </button>
                </td>
            </tr>
        `;
    });
    tbody.html(html);
}
```

#### 7.3.3 åˆ—è¡¨æ’åºåŠŸèƒ½

##### åŠŸèƒ½æè¿°

å·²å¯¼å…¥é¡¹ç›®è¡¨æ ¼æ”¯æŒç‚¹å‡»åˆ—æ ‡é¢˜è¿›è¡Œå‡åº/é™åºæ’åºã€‚ç”¨æˆ·å¯ä»¥ç‚¹å‡»ä»»æ„æ”¯æŒæ’åºçš„åˆ—æ ‡é¢˜ï¼Œåˆ‡æ¢æ’åºé¡ºåºã€‚

##### æ’åºè§„åˆ™

- **é»˜è®¤æ’åº**: æŒ‰é¡¹ç›®ç¼–å·ï¼ˆproject_idï¼‰å‡åºæ’åˆ—
- **åˆ‡æ¢é€»è¾‘**: ç‚¹å‡»åŒä¸€åˆ—æ—¶ï¼Œåœ¨ å‡åº â†’ é™åº â†’ æ¢å¤é»˜è®¤æ’åº ä¹‹é—´å¾ªç¯
- **å¤šåˆ—æ’åº**: ä»…æ”¯æŒå•åˆ—æ’åºï¼Œç‚¹å‡»æ–°åˆ—æ—¶ä¼šæ¸…é™¤ä¹‹å‰çš„æ’åº
- **ä¸æ”¯æŒæ’åº**: åºå·åˆ—ï¼ˆ#ï¼‰å’Œæ“ä½œåˆ—ä¸æ”¯æŒæ’åº

##### æ’åºçŠ¶æ€æŒ‡ç¤º

| çŠ¶æ€ | å›¾æ ‡ | è¯´æ˜ |
|------|------|------|
| æœªæ’åº | - | ç‚¹å‡»åæœªè¿›è¡Œæ’åº |
| å‡åº | â†—ï¸ æˆ– bi-arrow-up | æŒ‰å½“å‰åˆ—å‡åºæ’åˆ— |
| é™åº | â†˜ï¸ æˆ– bi-arrow-down | æŒ‰å½“å‰åˆ—é™åºæ’åˆ— |

##### æ”¯æŒæ’åºçš„åˆ—

| åˆ—å | æ’åºå­—æ®µ | æ’åºç±»å‹ |
|------|---------|---------|
| é¡¹ç›®ç¼–å· | project_id | å­—ç¬¦ä¸² |
| é¡¹ç›®åç§° | title | å­—ç¬¦ä¸² |
| é¡¹ç›®ç±»å‹ | project_type | å­—ç¬¦ä¸² |
| åˆ›å»ºæ—¶é—´ | created_at | æ—¥æœŸæ—¶é—´ |
| æ–‡ä»¶æ•°é‡ | file_count | æ•°å­— |

##### å‰ç«¯ä»£ç ç¤ºä¾‹

```javascript
// æ’åºçŠ¶æ€ç®¡ç†
let projectSortState = {
    column: 'project_id',  // å½“å‰æ’åºåˆ—
    direction: 'asc'       // æ’åºæ–¹å‘: 'asc' | 'desc'
};

// åˆå§‹åŒ–æ’åº
function initProjectSortableHeaders() {
    $('#project-list thead th[data-sortable="true"]').click(function() {
        const column = $(this).data('sort-column');
        toggleProjectSort(column);
    });
    updateProjectSortIcons();
}

// åˆ‡æ¢æ’åº
function toggleProjectSort(column) {
    if (projectSortState.column === column) {
        if (projectSortState.direction === 'asc') {
            projectSortState.direction = 'desc';
        } else {
            // æ¢å¤é»˜è®¤æ’åº
            projectSortState.column = 'project_id';
            projectSortState.direction = 'asc';
        }
    } else {
        projectSortState.column = column;
        projectSortState.direction = 'asc';
    }
    
    updateProjectSortIcons();
    applyFilter(); // é‡æ–°åŠ è½½å¹¶æ’åº
}

// æ›´æ–°æ’åºå›¾æ ‡
function updateProjectSortIcons() {
    $('#project-list thead th').each(function() {
        const column = $(this).data('sort-column');
        const icon = $(this).find('.sort-icon');
        
        icon.removeClass('bi-arrow-up bi-arrow-down bi-dash');
        
        if (column === projectSortState.column) {
            if (projectSortState.direction === 'asc') {
                icon.addClass('bi-arrow-up');
            } else {
                icon.addClass('bi-arrow-down');
            }
        } else {
            icon.addClass('bi-dash');
        }
    });
}

// æ’åºå‡½æ•°
function sortProjects(projects) {
    return projects.sort((a, b) => {
        let valueA = a[projectSortState.column];
        let valueB = b[projectSortState.column];
        
        // å¤„ç†ç©ºå€¼
        if (valueA === null || valueA === undefined) valueA = '';
        if (valueB === null || valueB === undefined) valueB = '';
        
        // æ–‡ä»¶æ•°é‡æ’åºï¼ˆæ•°å­—ï¼‰
        if (projectSortState.column === 'file_count') {
            return projectSortState.direction === 'asc' 
                ? (valueA || 0) - (valueB || 0)
                : (valueB || 0) - (valueA || 0);
        }
        
        // æ—¥æœŸæ’åº
        if (projectSortState.column === 'created_at') {
            const dateA = new Date(valueA);
            const dateB = new Date(valueB);
            return projectSortState.direction === 'asc' 
                ? dateA.getTime() - dateB.getTime()
                : dateB.getTime() - dateA.getTime();
        }
        
        // å­—ç¬¦ä¸²æ’åº
        const strA = String(valueA).toLowerCase();
        const strB = String(valueB).toLowerCase();
        
        if (strA < strB) return projectSortState.direction === 'asc' ? -1 : 1;
        if (strA > strB) return projectSortState.direction === 'asc' ? 1 : -1;
        return 0;
    });
}
```

##### HTML è¡¨å¤´ç¤ºä¾‹

```html
<table class="table table-hover">
    <thead class="table-light">
        <tr>
            <th data-sortable="false">#</th>
            <th data-sortable="true" data-sort-column="project_id">
                é¡¹ç›®ç¼–å· <i class="bi bi-dash sort-icon"></i>
            </th>
            <th data-sortable="true" data-sort-column="title">
                é¡¹ç›®åç§° <i class="bi bi-dash sort-icon"></i>
            </th>
            <th data-sortable="true" data-sort-column="project_type">
                é¡¹ç›®ç±»å‹ <i class="bi bi-dash sort-icon"></i>
            </th>
            <th data-sortable="true" data-sort-column="created_at">
                åˆ›å»ºæ—¶é—´ <i class="bi bi-dash sort-icon"></i>
            </th>
            <th data-sortable="true" data-sort-column="file_count">
                æ–‡ä»¶æ•°é‡ <i class="bi bi-dash sort-icon"></i>
            </th>
            <th data-sortable="false">æ“ä½œ</th>
        </tr>
    </thead>
    <tbody id="project-list">
        <!-- é¡¹ç›®åˆ—è¡¨å†…å®¹ -->
    </tbody>
</table>
```

### 7.4 æ–‡ä»¶ç®¡ç† - å¯¼å…¥é¡µé¢

#### åŠŸèƒ½æ¦‚è¿°

å¯¼å…¥é¡µé¢æä¾›æ‰«æä¸‹è½½ç›®å½•ã€é€‰æ‹©æ–‡ä»¶å’Œå¯¼å…¥é¡¹ç›®çš„åŠŸèƒ½ã€‚

#### é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–‡ä»¶ç®¡ç†                                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç®¡ç†] [å¯¼å…¥]                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä¸‹è½½ç›®å½•æ–‡ä»¶å¤¹                                            [æ‰«æ]     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  [ğŸ“] folder1                                   [å¯¼å…¥] [æŸ¥çœ‹]       â”‚   â”‚
â”‚  â”‚       10 ä¸ªæ–‡ä»¶                                                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  [ğŸ“] folder2                                   [å¯¼å…¥] [æŸ¥çœ‹]       â”‚   â”‚
â”‚  â”‚       5 ä¸ªæ–‡ä»¶                                                   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.5 é¡¹ç›®è¯¦æƒ…æ¨¡æ€æ¡†

#### åŠŸèƒ½æè¿°

ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®åå¼¹å‡ºæ¨¡æ€æ¡†ï¼Œå±•ç¤ºè¯¥é¡¹ç›®çš„æ–‡ä»¶ä¿¡æ¯ã€‚

#### æ¨¡æ€æ¡†å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¹ç›®è¯¦æƒ… - RAW_XXX                                             [å…³é—­] [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  é¡¹ç›®åç§°: æµ‹è¯•é¡¹ç›®                                      åˆ›å»ºæ—¶é—´: 2026-01-01â”‚
â”‚  é¡¹ç›®ç±»å‹: åŸå§‹æ•°æ®                                    æ–‡ä»¶æ•°é‡: 10         â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜ â”‚ æ–‡ä»¶å              â”‚ æ–‡ä»¶å¤§å° â”‚ æ–‡ä»¶ç±»å‹ â”‚ å¯¼å…¥æ—¶é—´            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â˜‘ â”‚ sample1.fastq.gz   â”‚ 1.5 GB   â”‚ FASTQ    â”‚ 2026-01-01 10:30:00 â”‚   â”‚
â”‚  â”‚ â˜‘ â”‚ sample2.fastq.gz   â”‚ 1.4 GB   â”‚ FASTQ    â”‚ 2026-01-01 10:32:00 â”‚   â”‚
â”‚  â”‚ â˜ â”‚ sample3.fastq.gz   â”‚ 1.3 GB   â”‚ FASTQ    â”‚ 2026-01-01 10:34:00 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [åˆ é™¤] [ä¸‹è½½]                                                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ¨¡æ€æ¡†å­—æ®µè¯´æ˜

| å­—æ®µ | æ•°æ®åº“æ¥æº | è¯´æ˜ |
|------|-----------|------|
| â˜ | - | å¤é€‰æ¡†ï¼ˆç”¨äºé€‰æ‹©è¦æ“ä½œçš„æ–‡ä»¶ï¼‰ |
| æ–‡ä»¶å | file_record.file_name | å®Œæ•´æ–‡ä»¶åï¼ˆå«æ‰©å±•åï¼‰ |
| æ–‡ä»¶å¤§å° | file_record.file_size | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| æ–‡ä»¶ç±»å‹ | file_record.file_type | æ–‡ä»¶ç±»å‹æ‰©å±•å |
| å¯¼å…¥æ—¶é—´ | file_record.imported_at | å¯¼å…¥æ—¶é—´ |

#### é¡¹ç›®åŸºæœ¬ä¿¡æ¯åŒºåŸŸ

| å­—æ®µ | æ•°æ®åº“æ¥æº | è¯´æ˜ |
|------|-----------|------|
| é¡¹ç›®åç§° | raw_project.raw_title / result_project.results_title | é¡¹ç›®æ ‡é¢˜ |
| é¡¹ç›®ç±»å‹ | file_record.file_project_type | raw / result |
| åˆ›å»ºæ—¶é—´ | raw_project.created_at / result_project.created_at | é¡¹ç›®åˆ›å»ºæ—¶é—´ |
| æ–‡ä»¶æ•°é‡ | COUNT(file_record.id) | å…³è”æ–‡ä»¶æ•°é‡ |

#### ç©ºé¡¹ç›®çŠ¶æ€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¹ç›®è¯¦æƒ… - RAW_XXX                                             [å…³é—­] [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  é¡¹ç›®åç§°: æµ‹è¯•é¡¹ç›®                                      åˆ›å»ºæ—¶é—´: 2026-01-01â”‚
â”‚  é¡¹ç›®ç±»å‹: åŸå§‹æ•°æ®                                    æ–‡ä»¶æ•°é‡: 0         â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚              è¯¥é¡¹ç›®æš‚æ— æ–‡ä»¶                                          â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [åˆ é™¤] [ä¸‹è½½] (æŒ‰é’®ç¦ç”¨çŠ¶æ€)                                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- æ˜¾ç¤ºæ–‡å­—ï¼š"è¯¥é¡¹ç›®æš‚æ— æ–‡ä»¶"
- ç¦ç”¨"åˆ é™¤"å’Œ"ä¸‹è½½"æŒ‰é’®

#### 7.5.1 æ–‡ä»¶åˆ—è¡¨æ’åºåŠŸèƒ½

##### åŠŸèƒ½æè¿°

é¡¹ç›®è¯¦æƒ…æ¨¡æ€æ¡†å†…çš„æ–‡ä»¶åˆ—è¡¨æ”¯æŒç‚¹å‡»åˆ—æ ‡é¢˜è¿›è¡Œå‡åº/é™åºæ’åºã€‚

##### æ’åºè§„åˆ™

- **é»˜è®¤æ’åº**: æŒ‰å¯¼å…¥æ—¶é—´ï¼ˆimported_atï¼‰é™åºæ’åˆ—ï¼ˆæœ€æ–°çš„æ–‡ä»¶åœ¨å‰é¢ï¼‰
- **åˆ‡æ¢é€»è¾‘**: ç‚¹å‡»åŒä¸€åˆ—æ—¶ï¼Œåœ¨ å‡åº â†’ é™åº â†’ æ¢å¤é»˜è®¤æ’åº ä¹‹é—´å¾ªç¯
- **å¤šåˆ—æ’åº**: ä»…æ”¯æŒå•åˆ—æ’åºï¼Œç‚¹å‡»æ–°åˆ—æ—¶ä¼šæ¸…é™¤ä¹‹å‰çš„æ’åº
- **ä¸æ”¯æŒæ’åº**: å¤é€‰æ¡†åˆ—ï¼ˆâ˜ï¼‰ä¸æ”¯æŒæ’åº

##### æ”¯æŒæ’åºçš„åˆ—

| åˆ—å | æ’åºå­—æ®µ | æ’åºç±»å‹ |
|------|---------|---------|
| æ–‡ä»¶å | file_name | å­—ç¬¦ä¸² |
| æ–‡ä»¶å¤§å° | file_size | æ•°å­— |
| æ–‡ä»¶ç±»å‹ | file_type | å­—ç¬¦ä¸² |
| å¯¼å…¥æ—¶é—´ | imported_at | æ—¥æœŸæ—¶é—´ |

##### å‰ç«¯ä»£ç ç¤ºä¾‹

```javascript
// é¡¹ç›®è¯¦æƒ…æ¨¡æ€æ¡†æ’åºçŠ¶æ€ç®¡ç†
let detailSortState = {
    column: 'imported_at',  // å½“å‰æ’åºåˆ—
    direction: 'desc'       // æ’åºæ–¹å‘: 'asc' | 'desc'
};

// åˆå§‹åŒ–è¯¦æƒ…æ¨¡æ€æ¡†æ’åº
function initDetailSortableHeaders() {
    $('#detail-content thead th[data-sortable="true"]').click(function() {
        const column = $(this).data('sort-column');
        toggleDetailSort(column);
    });
    updateDetailSortIcons();
}

// åˆ‡æ¢è¯¦æƒ…æ¨¡æ€æ¡†æ’åº
function toggleDetailSort(column) {
    if (detailSortState.column === column) {
        if (detailSortState.direction === 'asc') {
            detailSortState.direction = 'desc';
        } else {
            // æ¢å¤é»˜è®¤æ’åº
            detailSortState.column = 'imported_at';
            detailSortState.direction = 'desc';
        }
    } else {
        detailSortState.column = column;
        detailSortState.direction = 'asc';
    }
    
    updateDetailSortIcons();
    // é‡æ–°æ¸²æŸ“æ–‡ä»¶åˆ—è¡¨
    const projectId = $('#detail-modal').data('project-id');
    const projectType = $('#detail-modal').data('project-type');
    showProjectDetail(projectId, projectType);
}

// è¯¦æƒ…æ¨¡æ€æ¡†æ’åºå‡½æ•°
function sortFiles(files) {
    return files.sort((a, b) => {
        let valueA = a[detailSortState.column];
        let valueB = b[detailSortState.column];
        
        // å¤„ç†ç©ºå€¼
        if (valueA === null || valueA === undefined) valueA = '';
        if (valueB === null || valueB === undefined) valueB = '';
        
        // æ–‡ä»¶å¤§å°æ’åºï¼ˆæ•°å­—ï¼‰
        if (detailSortState.column === 'file_size') {
            return detailSortState.direction === 'asc' 
                ? valueA - valueB 
                : valueB - valueA;
        }
        
        // æ—¥æœŸæ’åº
        if (detailSortState.column === 'imported_at') {
            const dateA = new Date(valueA);
            const dateB = new Date(valueB);
            return detailSortState.direction === 'asc' 
                ? dateA.getTime() - dateB.getTime() 
                : dateB.getTime() - dateA.getTime();
        }
        
        // å­—ç¬¦ä¸²æ’åº
        const strA = String(valueA).toLowerCase();
        const strB = String(valueB).toLowerCase();
        
        if (strA < strB) return detailSortState.direction === 'asc' ? -1 : 1;
        if (strA > strB) return detailSortState.direction === 'asc' ? 1 : -1;
        return 0;
    });
}
```

### 7.6 æ–‡ä»¶æ“ä½œåŠŸèƒ½

#### 7.6.1 åˆ é™¤åŠŸèƒ½

##### å‰ç«¯äº¤äº’

```
ç”¨æˆ·ç‚¹å‡» [åˆ é™¤] æŒ‰é’®
        â”‚
        â–¼
å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¡®è®¤åˆ é™¤                                â”‚
â”‚                                         â”‚
â”‚  è¯·è¾“å…¥ "æˆ‘å·²çŸ¥æ™“ï¼Œç¡®è®¤åˆ é™¤" ä»¥ç¡®è®¤æ“ä½œ:   â”‚
â”‚  _____________________________________  â”‚
â”‚                                         â”‚
â”‚  [å–æ¶ˆ]                        [ç¡®è®¤åˆ é™¤] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
ç”¨æˆ·è¾“å…¥æ­£ç¡®æ–‡å­—å¹¶ç‚¹å‡»ç¡®è®¤
        â”‚
        â–¼
å‰ç«¯å‘é€è¯·æ±‚: DELETE /api/files
    å‚æ•°: { file_ids: [id1, id2, ...] }
        â”‚
        â–¼
åå°æ‰§è¡Œ:
    1. æŸ¥è¯¢ file_record è·å– file_path å’Œ file_name
    2. æ‹¼æ¥å®Œæ•´è·¯å¾„: /bio/{file_path}/{file_name}
    3. å¤åˆ¶æ–‡ä»¶åˆ° /bio/recycle/{file_path}/ (ç»´æŒç›®å½•ç»“æ„)
    4. åˆ é™¤æºæ–‡ä»¶
    5. åˆ é™¤ file_record è¡¨ä¸­çš„è®°å½•
        â”‚
        â–¼
è¿”å›: { success: true, message: "åˆ é™¤æˆåŠŸ" }
        â”‚
        â–¼
å‰ç«¯åˆ·æ–°æ¨¡æ€æ¡†å†…çš„æ–‡ä»¶è¡¨æ ¼
```

##### ç¡®è®¤å¯¹è¯æ¡†ç¤ºä¾‹

```javascript
// åˆ é™¤æ–‡ä»¶
function deleteSelectedFiles() {
    const selectedIds = [];
    $('.file-checkbox:checked').each(function() {
        selectedIds.push(parseInt($(this).val()));
    });
    
    if (selectedIds.length === 0) {
        showToast('è¯·é€‰æ‹©è¦åˆ é™¤çš„æ–‡ä»¶', 'warning');
        return;
    }
    
    // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
    $('#delete-confirm-modal').modal('show');
}

// æ‰§è¡Œåˆ é™¤ç¡®è®¤
function confirmDelete() {
    const confirmText = $('#delete-confirm-input').val();
    if (confirmText !== 'æˆ‘å·²çŸ¥æ™“ï¼Œç¡®è®¤åˆ é™¤') {
        showToast('è¯·è¾“å…¥æ­£ç¡®çš„ç¡®è®¤æ–‡å­—', 'error');
        return;
    }
    
    const selectedIds = [];
    $('.file-checkbox:checked').each(function() {
        selectedIds.push(parseInt($(this).val()));
    });
    
    apiDelete('/api/files', { file_ids: selectedIds }).then(function(res) {
        if (res.success) {
            showToast('åˆ é™¤æˆåŠŸ', 'success');
            $('#delete-confirm-modal').modal('hide');
            $('#delete-confirm-input').val('');
            // åˆ·æ–°æ–‡ä»¶åˆ—è¡¨
            const projectId = $('#detail-modal').data('project-id');
            showProjectDetail(projectId);
        } else {
            showToast(res.message || 'åˆ é™¤å¤±è´¥', 'error');
        }
    });
}
```

##### ç›®å½•ç»“æ„ç»´æŒç¤ºä¾‹

```
åŸè·¯å¾„: /bio/rawdata/mRseq/Hs/Li/RAW_XXX/sample.fastq
ç›®æ ‡:  /bio/recycle/rawdata/mRseq/Hs/Li/RAW_XXX/sample.fastq
```

#### 7.6.2 ä¸‹è½½åŠŸèƒ½

##### å‰ç«¯äº¤äº’

```
ç”¨æˆ·é€‰æ‹©æ–‡ä»¶ï¼ˆå‹¾é€‰å¤é€‰æ¡†ï¼‰
        â”‚
        â–¼
ç”¨æˆ·ç‚¹å‡» [ä¸‹è½½] æŒ‰é’®
        â”‚
        â–¼
å‰ç«¯å‘é€è¯·æ±‚: POST /api/files/download
    å‚æ•°: { file_ids: [id1, id2, ...] }
        â”‚
        â–¼
åå°æ‰§è¡Œ:
    1. æŸ¥è¯¢ file_record è·å– file_path å’Œ file_name
    2. æ‹¼æ¥å®Œæ•´è·¯å¾„: /bio/{file_path}/{file_name}
    3. è¯»å–å„ä¸ªæ–‡ä»¶å†…å®¹
    4. æ‰“åŒ…ä¸º ZIP æ–‡ä»¶ (download.zip)
    5. è¿”å› ZIP æ–‡ä»¶æµ
        â”‚
        â–¼
æµè§ˆå™¨è§¦å‘ä¸‹è½½
```

##### å‰ç«¯ä»£ç ç¤ºä¾‹

```javascript
// ä¸‹è½½é€‰ä¸­æ–‡ä»¶
function downloadSelectedFiles() {
    const selectedIds = [];
    $('.file-checkbox:checked').each(function() {
        selectedIds.push(parseInt($(this).val()));
    });
    
    if (selectedIds.length === 0) {
        showToast('è¯·é€‰æ‹©è¦ä¸‹è½½çš„æ–‡ä»¶', 'warning');
        return;
    }
    
    // åˆ›å»ºè¡¨å•æäº¤
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = '/api/files/download';
    form.style.display = 'none';
    
    const input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'file_ids';
    input.value = JSON.stringify(selectedIds);
    form.appendChild(input);
    
    document.body.appendChild(form);
    form.submit();
    document.body.removeChild(form);
    
    showToast('å¼€å§‹ä¸‹è½½...', 'info');
}
```

##### ZIP åŒ…ç»“æ„

```
download.zip
â”œâ”€â”€ sample1.fastq
â”œâ”€â”€ sample2.fastq
â””â”€â”€ sample3.fastq
```

### 7.7 API æ¥å£è®¾è®¡

#### 7.7.1 è·å–å·²å¯¼å…¥é¡¹ç›®åˆ—è¡¨

```
GET /api/files/imported-projects

è¯´æ˜: è·å–å·²å¯¼å…¥é¡¹ç›®çš„åˆ—è¡¨ï¼Œæ”¯æŒæŒ‰é¡¹ç›®ç±»å‹å’Œé¡¹ç›®ç¼–å·ç­›é€‰

å‚æ•°:
- file_project_type: string (å¯é€‰, raw | result)
- file_project_ids: string (å¯é€‰, é€—å·åˆ†éš”çš„é¡¹ç›®ç¼–å·)

è¯·æ±‚ç¤ºä¾‹:
GET /api/files/imported-projects
GET /api/files/imported-projects?file_project_type=raw
GET /api/files/imported-projects?file_project_ids=RAW_XXX,RAW_YYY
GET /api/files/imported-projects?file_project_type=raw&file_project_ids=RAW_XXX,RAW_YYY

å“åº”æˆåŠŸ (200):
{
    "success": true,
    "data": [
        {
            "project_id": "RAW_XXX",
            "project_type": "raw",
            "title": "é¡¹ç›®åç§°",
            "created_at": "2026-01-01 10:00:00",
            "file_count": 10
        }
    ],
    "total": 1
}

å“åº”å¤±è´¥ (400/500):
{
    "success": false,
    "message": "é”™è¯¯ä¿¡æ¯"
}
```

#### 7.7.2 è·å–é¡¹ç›®æ–‡ä»¶åˆ—è¡¨

```
GET /api/files

è¯´æ˜: è·å–æŒ‡å®šé¡¹ç›®çš„æ–‡ä»¶åˆ—è¡¨

å‚æ•°:
- project_id: string (å¿…å¡«, é¡¹ç›®ç¼–å·)

è¯·æ±‚ç¤ºä¾‹:
GET /api/files?project_id=RAW_XXX

å“åº”æˆåŠŸ (200):
{
    "success": true,
    "project_id": "RAW_XXX",
    "project_type": "raw",
    "files": [
        {
            "id": 1,
            "file_name": "sample1.fastq.gz",
            "file_size": 1612345678,
            "file_type": "fastq.gz",
            "imported_at": "2026-01-01 10:30:00"
        }
    ],
    "total": 1
}

å“åº”å¤±è´¥ (400/500):
{
    "success": false,
    "message": "é”™è¯¯ä¿¡æ¯"
}
```

#### 7.7.3 åˆ é™¤æ–‡ä»¶

```
DELETE /api/files

è¯´æ˜: åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶è®°å½•ï¼Œå¹¶å°†æºæ–‡ä»¶ç§»åŠ¨åˆ°å›æ”¶ç«™

è¯·æ±‚ä½“ (Content-Type: application/json):
{
    "file_ids": [1, 2, 3]
}

å“åº”æˆåŠŸ (200):
{
    "success": true,
    "message": "åˆ é™¤æˆåŠŸ",
    "deleted_count": 3
}

å“åº”å¤±è´¥ (400/500):
{
    "success": false,
    "message": "é”™è¯¯ä¿¡æ¯"
}
```

#### 7.7.4 ä¸‹è½½æ–‡ä»¶

```
POST /api/files/download

è¯´æ˜: ä¸‹è½½æŒ‡å®šçš„æ–‡ä»¶ï¼Œæ”¯æŒå•æ–‡ä»¶å’Œå¤šæ–‡ä»¶æ‰“åŒ…ä¸‹è½½

è¯·æ±‚ä½“ (Content-Type: application/json):
{
    "file_ids": [1, 2, 3]
}

å“åº”æˆåŠŸ (200):
- Content-Type: application/zip
- Content-Disposition: attachment; filename="download.zip"
- Body: ZIP æ–‡ä»¶æµ

å“åº”å¤±è´¥ (400/500):
{
    "success": false,
    "message": "é”™è¯¯ä¿¡æ¯"
}
```

#### 7.7.5 é”™è¯¯å“åº”æ ¼å¼

æ‰€æœ‰ API çš„é”™è¯¯å“åº”ç»Ÿä¸€æ ¼å¼ï¼š

```json
{
    "success": false,
    "message": "é”™è¯¯æè¿°ä¿¡æ¯",
    "code": "ERROR_CODE"
}
```

å¸¸è§é”™è¯¯ç ï¼š

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| INVALID_PARAMS | å‚æ•°é”™è¯¯ |
| PROJECT_NOT_FOUND | é¡¹ç›®ä¸å­˜åœ¨ |
| FILE_NOT_FOUND | æ–‡ä»¶ä¸å­˜åœ¨ |
| FILE_DELETE_FAILED | æ–‡ä»¶åˆ é™¤å¤±è´¥ |
| FILE_DOWNLOAD_FAILED | æ–‡ä»¶ä¸‹è½½å¤±è´¥ |
| INTERNAL_ERROR | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

### 7.3.2 æ–‡ä»¶å¯¼å…¥

å¯¹åº”å­é¡µé¢ï¼šæ–‡ä»¶ç®¡ç†-å¯¼å…¥

### é é¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–‡ä»¶ç®¡ç†                                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç®¡ç†] [å°å…¥]                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ–‡ä»¶å¤¿åˆ—è¡¨                                          [3ä¸ª] [æƒæ]     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  [ğŸ“] folder1                                   [å°å…¥] [æŸ¥çœ‹]       â”‚   â”‚
â”‚  â”‚       10 å€‹æ–‡ä»¶                                                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  [ğŸ“] folder2                                   [å°å…¥] [æŸ¥çœ‹]       â”‚   â”‚
â”‚  â”‚       5 å€‹æ–‡ä»¶                                                   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  [ğŸ“] folder3                                   [å°å…¥] [æŸ¥çœ‹]       â”‚   â”‚
â”‚  â”‚       8 å€‹æ–‡ä»¶                                                   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é é¢åŠŸèƒ½èªªæ˜

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| æƒææŒ‰éˆ• | é»æ“Šå¾Œæƒæ /bio/downloads ç›®éŒ„ï¼Œåˆ—å‡ºæ‰€æœ‰å­æ–‡ä»¶å¤¾ ï¼Œå¹¶åœ¨å³ä¾§æ˜¾ç¤ºæ–‡ä»¶å¤¹æ•°é‡|
| æ–‡ä»¶å¤¿åˆ—è¡¨ | é¡¯ç¤ºæƒæåˆ°çš„æ–‡ä»¶ï¼Œæ¯è¡Œé¡¯ç¤ºæ–‡ä»¶å¤¿åç¨±ã€æ–‡ä»¶æ•¸é‡ |
| å°å…¥æŒ‰éˆ• | é»æ“Šå¾Œæ‰“é–‹å°å…¥å½ˆçª—ï¼Œé¸æ“‡æˆ–æ–°å»ºé …ç›®å¾Œå°å…¥æ–‡ä»¶ |
| æŸ¥çœ‹æŒ‰éˆ• | é»æ“Šå¾ŒæŸ¥çœ‹æ–‡ä»¶å¤¿å…§çš„çš„æ–‡ä»¶åˆ—è¡¨ |

#### æ–‡ä»¶å¯¼å…¥è¡¨å•
å¯¼å…¥æ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿæ ¹æ®æ•°æ®ç±»å‹ï¼ˆåŸå§‹æ•°æ®/ç»“æœæ•°æ®ï¼‰åŠ¨æ€åŠ è½½å…ƒæ•°æ®å­—æ®µé…ç½®ï¼š

**ç›®æ ‡é¡¹ç›®é€‰æ‹©**ï¼š
- **[æ–°å»ºé¡¹ç›®]**: åˆ‡æ¢åˆ°æ–°å»ºé¡¹ç›®æ¨¡å¼ï¼Œæ˜¾ç¤ºå®Œæ•´å…ƒæ•°æ®è¡¨å•
- **[é€‰æ‹©å·²æœ‰é¡¹ç›®]**: åˆ‡æ¢åˆ°é€‰æ‹©å·²æœ‰é¡¹ç›®æ¨¡å¼ï¼Œæ˜¾ç¤ºé¡¹ç›®ä¸‹æ‹‰é€‰æ‹©æ¡†
- ä¸‹æ‹‰æ¡†é€‰é¡¹æ ¼å¼: `é¡¹ç›®ç¼–å·|é¡¹ç›®æ ‡é¢˜`ï¼ˆå¦‚ `RAW_A1B2C3D4|è‚ºç™ŒmRNAseqç ”ç©¶`ï¼‰

**åŸå§‹æ•°æ®å¯¼å…¥è¡¨å•å¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç›®æ ‡é¡¹ç›®: [æ–°å»ºé¡¹ç›®]  â—‰ [é€‰æ‹©å·²æœ‰é¡¹ç›®]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®ç±»å‹: â— [åŸå§‹æ•°æ®]  â—‹ [ç»“æœæ•°æ®]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€‰æ‹©å·²æœ‰é¡¹ç›®: [RAW_A1B2C3D4|è‚ºç™ŒmRNAseqç ”ç©¶ â–¼]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é¡¹ç›®ç¼–å·: RAW_A1B2C3D4   (åªè¯»)                         â”‚
â”‚ æ•°æ®ç±»å‹: [mRNAseq â–¼]       (å¯ç¼–è¾‘ï¼Œsingle_select)     â”‚
â”‚ ç‰©ç§:     [Homo sapiens â–¼]  (å¯ç¼–è¾‘ï¼Œsingle_select)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€‰æ‹©æ–‡ä»¶: [å…¨é€‰] [å–æ¶ˆå…¨é€‰]                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â˜‘ file1.fastq  â˜‘ file2.fastq                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç»“æœæ•°æ®å¯¼å…¥è¡¨å•å¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç›®æ ‡é¡¹ç›®: [æ–°å»ºé¡¹ç›®]  â—‰ [é€‰æ‹©å·²æœ‰é¡¹ç›®]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®ç±»å‹: â—‹ [åŸå§‹æ•°æ®]  â— [ç»“æœæ•°æ®]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€‰æ‹©å·²æœ‰é¡¹ç›®: [RES_X1Y2Z3|å·®å¼‚åˆ†æç»“æœ â–¼]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é¡¹ç›®ç¼–å·: RES_X1Y2Z3   (åªè¯»)                           â”‚
â”‚ åˆ†æç±»å‹: [DEA â–¼]              (å¯ç¼–è¾‘ï¼Œsingle_select)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€‰æ‹©æ–‡ä»¶: [å…¨é€‰] [å–æ¶ˆå…¨é€‰]                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â˜‘ result.csv  â˜‘ stats.txt                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…ƒæ•°æ®å­—æ®µæ˜¾ç¤ºè§„åˆ™**ï¼š
- æ ¹æ®ç¯å¢ƒå˜é‡é…ç½®åŠ¨æ€é€‰æ‹©æ˜¾ç¤ºçš„å­—æ®µç¼–å·
- `METADATA_FIELDS_NEW_RAW`ï¼šæ–°å»ºåŸå§‹æ•°æ®é¡¹ç›®æ—¶æ˜¾ç¤ºçš„å­—æ®µï¼ˆé»˜è®¤: 3,4,5,6,7ï¼‰
- `METADATA_FIELDS_EXIST_RAW`ï¼šå¯¼å…¥åˆ°å·²æœ‰åŸå§‹æ•°æ®é¡¹ç›®æ—¶æ˜¾ç¤ºçš„å­—æ®µï¼ˆé»˜è®¤: 3,4,5,6,7ï¼‰
- `METADATA_FIELDS_NEW_RESULT`ï¼šæ–°å»ºç»“æœé¡¹ç›®æ—¶æ˜¾ç¤ºçš„å­—æ®µï¼ˆé»˜è®¤: 3,4,5ï¼‰
- `METADATA_FIELDS_EXIST_RESULT`ï¼šå¯¼å…¥åˆ°å·²æœ‰ç»“æœé¡¹ç›®æ—¶æ˜¾ç¤ºçš„å­—æ®µï¼ˆé»˜è®¤: 3,4,5ï¼‰
- å­—æ®µæ§ä»¶ç±»å‹æ ¹æ® `field_type` åŠ¨æ€æ¸²æŸ“ï¼štext â†’ è¾“å…¥æ¡†ï¼Œtextarea â†’ æ–‡æœ¬åŸŸï¼Œselect â†’ ä¸‹æ‹‰æ¡†

**é€‰æ‹©å·²æœ‰é¡¹ç›®æ—¶çš„å…ƒæ•°æ®å€¼è¿½åŠ è§„åˆ™**ï¼š
- åŒä¸€ä¸ªåŸå§‹æ•°æ®é¡¹ç›®å¯ä»¥åŒ…å«ä¸åŒç§å±ã€ä¸åŒæ•°æ®ç±»å‹ã€ä¸åŒæ ·æœ¬æ¥æºçš„åŸå§‹æ•°æ®
- åŒä¸€ä¸ªç»“æœé¡¹ç›®ä¹Ÿå¯ä»¥åŒ…å«ä¸åŒçš„åˆ†æç±»å‹
- **å­—æ®µå€¼è¿½åŠ **ï¼šç”¨æˆ·é€‰æ‹©çš„æ–°å€¼ä¼šè¿½åŠ åˆ°é¡¹ç›®å½“å‰å­—æ®µå€¼ä¸­ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ï¼Œ**å»é‡**ï¼ˆå¦‚æœæ–°å€¼å·²å­˜åœ¨åˆ™ä¸è¿½åŠ ï¼‰
- **ç¤ºä¾‹**ï¼š
  - å½“å‰é¡¹ç›® raw_tissue = "Lung"
  - å¯¼å…¥æ—¶é€‰æ‹© raw_tissue = "Liver"
  - ç»“æœï¼šraw_tissue å˜ä¸º "Lung,Liver"
  - å¦‚æœé€‰æ‹©çš„æ˜¯ "Lung"ï¼Œåˆ™ raw_tissue ä¿æŒ "Lung"ï¼ˆä¸é‡å¤ï¼‰
- **å­˜å‚¨è·¯å¾„è®¡ç®—**ï¼šæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ–°å­—æ®µå€¼åŠ¨æ€ç¡®å®šå­˜å‚¨ç›®å½•ï¼ˆä¸€ä¸ªé¡¹ç›®å¯èƒ½æœ‰å¤šä¸ªå­ç›®å½•ï¼‰


**æ–‡ä»¶å¯¼å…¥æµç¨‹**ï¼š
```
ç”¨æˆ·é€‰æ‹©æ–‡ä»¶å¤¹ â”€â”€â–º é€‰æ‹©ç›®æ ‡é¡¹ç›®/æ–°å»ºé¡¹ç›® â”€â”€â–º é€‰æ‹©å¯¼å…¥æ–‡ä»¶ â”€â”€â–º ç¡®è®¤å¯¼å…¥
                                                                    â”‚
                                                                    â–¼
                                                        å¤åˆ¶æ–‡ä»¶åˆ°å­˜å‚¨ç›®å½•
                                                        åˆ›å»º file_record è®°å½•
                                                        æ›´æ–°é¡¹ç›®æ–‡ä»¶è®¡æ•°
```

#### å­˜å‚¨ç›®å½•ç»“æ„

**åŸå§‹æ•°æ®å­˜å‚¨**ï¼š
```
/bio/rawdata/
â””â”€â”€ {æ•°æ®ç±»å‹}/
    â””â”€â”€ {ç‰©ç§}/
        â””â”€â”€ {æ ·æœ¬æ¥æº}/
            â””â”€â”€ {é¡¹ç›®ç¼–å·}/
                â”œâ”€â”€ sample1.fastq
                â”œâ”€â”€ sample2.fastq
                â””â”€â”€ ...

ç›®å½•è§„åˆ™:
- æ•°æ®ç±»å‹: å¦‚ mRNAseqã€sRNAseqã€è›‹ç™½ç»„ ç­‰ï¼ˆæ¥è‡ª raw_typeï¼‰
- ç‰©ç§: å¦‚ Homo sapiensã€Mus musculus ç­‰ï¼ˆæ¥è‡ª raw_speciesï¼‰
- æ ·æœ¬æ¥æº: å¯é€‰ï¼Œå¦‚ Lungã€Liver ç­‰ï¼ˆæ¥è‡ª raw_tissueï¼Œä¸ºç©ºæ—¶çœç•¥è¯¥å±‚çº§ï¼‰
- é¡¹ç›®ç¼–å·: å¦‚ RAW_A1B2C3D4ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

**ç»“æœæ•°æ®å­˜å‚¨**ï¼š
```
/bio/results/
â””â”€â”€ {é¡¹ç›®ç¼–å·}/
    â””â”€â”€ {åˆ†æç±»å‹}/
        â””â”€â”€ [{å…³è”é¡¹ç›®ç¼–å·}]/
            â”œâ”€â”€ result1.csv
            â”œâ”€â”€ result2.csv
            â””â”€â”€ ...

ç›®å½•è§„åˆ™:
- é¡¹ç›®ç¼–å·: å¦‚ RES_X1Y2Z3ï¼ˆç»“æœé¡¹ç›®çš„å”¯ä¸€ç¼–å·ï¼‰
- åˆ†æç±»å‹: å¦‚ DEAã€Markerã€Enrichment ç­‰ï¼ˆæ¥è‡ª results_typeï¼‰
- å…³è”é¡¹ç›®ç¼–å·: å¯é€‰ï¼Œæ¥è‡ª results_raw å­—æ®µï¼ˆæ”¯æŒä¸­è‹±æ–‡é€—å·åˆ†éš”ï¼‰
  - å¤šä¸ªé¡¹ç›®ç¼–å·æŒ‰ ASCII å­—æ¯é¡ºåºæ’åºåç›´æ¥ç»„åˆï¼ˆæ— åˆ†éš”ç¬¦ï¼‰
  - ç¤ºä¾‹: `RAW_A1ï¼ŒRAW_2A, RAW_sa` â†’ æ’åºç»„åˆä¸º `RAW_2ARAW_A1RAW_sa`
  - å®Œæ•´è·¯å¾„ç¤ºä¾‹: `/bio/results/RES_X1Y2Z3/DEA/RAW_2ARAW_A1RAW_sa/`
```

**å…³è”é¡¹ç›®ç¼–å·å¤„ç†è§„åˆ™**ï¼š
- æ”¯æŒä¸­è‹±æ–‡é€—å·åˆ†éš”: `RAW_XXXï¼ŒRAW_YYY, RAW_ZZZ`
- å¤šä¸ªé¡¹ç›®ç¼–å·æŒ‰å­—æ¯æ’åºï¼ˆASCII é¡ºåºï¼šæ•°å­— < å¤§å†™å­—æ¯ < å°å†™å­—æ¯ï¼‰
- æ’åºåç›´æ¥ç»„åˆï¼Œä¸æ·»åŠ åˆ†éš”ç¬¦
- æ— å…³è”é¡¹ç›®æ—¶è·¯å¾„ä¸º: `/bio/results/{é¡¹ç›®ç¼–å·}/{åˆ†æç±»å‹}/`

**ç›¸å¯¹è·¯å¾„æ ¼å¼**ï¼š
- åŸå§‹æ•°æ®: `./æ•°æ®ç±»å‹/ç‰©ç§/æ ·æœ¬æ¥æº/é¡¹ç›®ç¼–å·/`ï¼ˆå››çº§ç»“æ„ï¼Œæ ·æœ¬æ¥æºå¯é€‰ï¼‰
- ç»“æœæ•°æ®: `./é¡¹ç›®ç¼–å·/åˆ†æç±»å‹/[å…³è”é¡¹ç›®ç¼–å·/]`ï¼ˆäºŒçº§æˆ–ä¸‰çº§ç»“æ„ï¼‰
- æ‰€æœ‰è·¯å¾„å‡ä¸ºç›¸å¯¹äº `/bio/rawdata` æˆ– `/bio/results` æ ¹ç›®å½•çš„ç›¸å¯¹è·¯å¾„

### 7.4 å…ƒæ•°æ®é…ç½®

#### åŠŸèƒ½ç‰¹æ€§
- åŠ¨æ€å­—æ®µé…ç½®ç®¡ç†
- å­—æ®µç±»å‹ç¼–è¾‘
- **åªè¯»å­—æ®µè®¾ç½® (`field_readonly`)**: å¯è®¾ç½®å­—æ®µä¸ºç³»ç»Ÿè‡ªåŠ¨ç®¡ç†ï¼ˆæ–‡ä»¶å¯¼å…¥æ—¶è‡ªåŠ¨æ›´æ–°ï¼‰
- ä¸‹æ‹‰é€‰é¡¹ç®¡ç†
- å­—æ®µæ’åºè°ƒæ•´
- æ•°æ®åº“å¤‡ä»½

#### å­—æ®µé…ç½®ç®¡ç†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å…ƒæ•°æ®é…ç½®                      [åˆ·æ–°] [æ›´æ–°æ’åº] [å¤‡ä»½]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åŸå§‹æ•°æ®â”‚ ç»“æœ   â”‚ æ–‡ä»¶   â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ’åº â”‚ å­—æ®µæ ‡è¯†ç¬¦  â”‚ å­—æ®µåç§° â”‚ ç±»å‹  â”‚ å¿…å¡« â”‚ æ’åˆ—æ–¹å¼ â”‚ åªè¯» â”‚ æ“ä½œâ”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ [1]  â”‚ raw_type   â”‚ æ•°æ®ç±»å‹ â”‚ ä¸‹æ‹‰  â”‚ æ˜¯   â”‚ ä¸¤åˆ—     â”‚ å¦   â”‚ [ç¼–è¾‘]â”‚   â”‚
â”‚  â”‚ [2]  â”‚ raw_speciesâ”‚ ç‰©ç§     â”‚ ä¸‹æ‹‰  â”‚ æ˜¯   â”‚ ä¸¤åˆ—     â”‚ å¦   â”‚ [ç¼–è¾‘]â”‚   â”‚
â”‚  â”‚ [12] â”‚ raw_file_count â”‚ æ–‡ä»¶æ•°é‡ â”‚ æ–‡æœ¬ â”‚ å¦   â”‚ ä¸¤åˆ—     â”‚ æ˜¯   â”‚ [ç¼–è¾‘]â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  åˆ—è¯´æ˜:                                                     â”‚
â”‚  - æ’åº: æ‹–æ‹½è°ƒæ•´å­—æ®µæ˜¾ç¤ºé¡ºåº                                â”‚
â”‚  - å­—æ®µæ ‡è¯†ç¬¦: æ•°æ®åº“å­—æ®µåç§° (å¦‚ raw_type)                  â”‚
â”‚  - å­—æ®µåç§°: å‰ç«¯æ˜¾ç¤ºçš„æ ‡ç­¾åç§°                              â”‚
â”‚  - ç±»å‹: æ–‡æœ¬/å¤šè¡Œæ–‡æœ¬/ä¸‹æ‹‰                                  â”‚
â”‚  - å¿…å¡«: æ˜¯å¦ä¸ºå¿…å¡«å­—æ®µ                                     â”‚
â”‚  - æ’åˆ—æ–¹å¼: å•åˆ—(å æ»¡æ•´è¡Œ) æˆ– ä¸¤åˆ—(é»˜è®¤)                    â”‚
â”‚  - åªè¯»: æ˜¯å¦ä¸ºç³»ç»Ÿè‡ªåŠ¨ç®¡ç†å­—æ®µ (ä¸å¯æ‰‹åŠ¨ç¼–è¾‘)               â”‚
â”‚                                                             â”‚
â”‚  ä¸‹æ‹‰æ¡†æ¨¡å¼è¯´æ˜:                                             â”‚
â”‚  - æ–°å»ºé¡¹ç›®/ç¼–è¾‘é¡¹ç›®: multi_select (å¯å¤šé€‰)                  â”‚
â”‚  - æ–‡ä»¶å¯¼å…¥: single_select (ä»…å•é€‰)                          â”‚
â”‚                                                             â”‚
â”‚  [æ·»åŠ å­—æ®µ]                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å…«ã€API æ¥å£è®¾è®¡

### 8.1 é¡¹ç›®ç›¸å…³æ¥å£

#### è·å–é¡¹ç›®åˆ—è¡¨
```
GET /api/projects?table=raw|result

Response:
{
    "success": true,
    "data": [
        {
            "id": 1,
            "raw_id": "RAW-A1B2C3D4",
            "raw_title": "é¡¹ç›®åç§°",
            "raw_type": "mRNAseq",
            "raw_species": "Homo sapiens",
            ...
        }
    ],
    "total": 10
}
```

#### åˆ›å»ºé¡¹ç›®
```
POST /api/projects
Content-Type: application/json

{
    "table": "raw",
    "data": {
        "raw_title": "é¡¹ç›®åç§°",
        "raw_type": "mRNAseq",
        "raw_species": "Homo sapiens",
        ...
    }
}

Response:
{"success": true, "message": "åˆ›å»ºæˆåŠŸ", "id": "RAW-A1B2C3D4"}
```

### 8.2 å…ƒæ•°æ®é…ç½®æ¥å£

#### è·å–é…ç½®
```
GET /api/metadata/config

Response:
{
    "success": true,
    "config": [
        {
            "id": 1,
            "field_id": "raw_type",
            "field_name": "æ•°æ®ç±»å‹",
            "field_type": "select",
            "field_table": "raw",
            "field_necessary": true,
            "field_readonly": false,
            "field_placeholder": "2",
            "field_seq": 2,
            "field_options": [
                {"value": "mRNAseq", "label": "mRNAseq"},
                {"value": "miRNAseq", "label": "miRNAseq"}
            ]
        },
        {
            "id": 12,
            "field_id": "raw_file_count",
            "field_name": "æ–‡ä»¶æ•°é‡",
            "field_type": "text",
            "field_table": "raw",
            "field_necessary": false,
            "field_readonly": true,
            "field_placeholder": "2",
            "field_seq": 12,
            "field_options": null
        }
    ]
}
```

**å“åº”å­—æ®µè¯´æ˜**:
- `field_placeholder`: æ’åˆ—æ–¹å¼ï¼Œ`1`=å•åˆ—æ˜¾ç¤ºï¼Œ`2`=ä¸¤åˆ—æ˜¾ç¤º
- `field_readonly`: åªè¯»å±æ€§ï¼Œ`0`=å¯ç¼–è¾‘ï¼Œ`1`=ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†

### 8.3 æ–‡ä»¶ç®¡ç†æ¥å£

#### æ‰«æç›®å½•
```
POST /api/files/scan
Content-Type: application/json

{"path": "/downloads/test_project"}

Response:
{
    "success": true,
    "files": [
        {"name": "sample.fastq", "path": "...", "size": 1024000}
    ]
}
```

## ä¹ã€æ€§èƒ½ä¼˜åŒ–

### 9.1 æ•°æ®åº“è¿æ¥æ± 

```python
# ä¼˜åŒ–é…ç½®
pool_size=20              # æ ¹æ®å¹¶å‘éœ€æ±‚è°ƒæ•´
pool_reset_session=True   # é‡ç½®ä¼šè¯çŠ¶æ€
connection_timeout=30     # è¿æ¥è¶…æ—¶æ—¶é—´
```

**ä¼˜åŒ–æ•ˆæœ**:
- é¿å…é¢‘ç¹åˆ›å»º/é”€æ¯è¿æ¥
- æ”¯æŒå¹¶å‘è¯·æ±‚å¤„ç†
- å‡å°‘æ•°æ®åº“æœåŠ¡å™¨è´Ÿè½½

### 9.2 è¯·æ±‚é˜²æŠ–

```javascript
// é˜²æŠ–é…ç½®
const AJAX_POOL = {
    getDebounceMs: 200,    // GET è¯·æ±‚ 200ms
    postDebounceMs: 500    // POST è¯·æ±‚ 500ms
};
```

**ä¼˜åŒ–æ•ˆæœ**:
- é˜²æ­¢ç”¨æˆ·å¿«é€Ÿç‚¹å‡»å¯¼è‡´çš„é‡å¤è¯·æ±‚
- å‡å°‘æ•°æ®åº“æŸ¥è¯¢å‹åŠ›
- æå‡å‰ç«¯å“åº”ä½“éªŒ

### 9.3 è¿æ¥ç”Ÿå‘½å‘¨æœŸç®¡ç†

```python
# æ¯ä¸ªæ“ä½œç‹¬ç«‹è·å–/å½’è¿˜è¿æ¥
def query(self, query, params=None):
    connection = self.get_connection()
    try:
        # æ‰§è¡ŒæŸ¥è¯¢
        cursor.execute(query, params)
        return cursor.fetchall()
    finally:
        # å§‹ç»ˆé‡Šæ”¾èµ„æº
        cursor.close()
        connection.close()
```

**ä¼˜åŒ–æ•ˆæœ**:
- é˜²æ­¢è¿æ¥æ³„æ¼
- ç¡®ä¿è¿æ¥åŠæ—¶å½’è¿˜æ± 
- é¿å…è¿æ¥è€—å°½

## åã€éƒ¨ç½²æ¶æ„

### 10.1 Docker éƒ¨ç½²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Docker Compose                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ biodata-manager     â”‚    â”‚ biodata-mysql       â”‚           â”‚
â”‚  â”‚ - Flask 8000        â”‚â”€â”€â”€â–ºâ”‚ - MySQL 3306        â”‚           â”‚
â”‚  â”‚ - è¿æ¥æ±  20         â”‚    â”‚                     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                 â”‚
â”‚  ç«¯å£æ˜ å°„:                                                         â”‚
â”‚  - 20425:8000 (å¯¹å¤–)                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 æ•°æ®å­˜å‚¨

```
/bioraw/
â”œâ”€â”€ rawdata/          # åŸå§‹æ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ {abbr}/{abbr}/{abbr}/{raw_id}/
â”œâ”€â”€ downloads/        # ä¸‹è½½ç›®å½• (æ‰«æå¯¼å…¥)
â”œâ”€â”€ results/          # ç»“æœæ•°æ®å­˜å‚¨
â””â”€â”€ analysis/         # åˆ†æç»“æœå­˜å‚¨
```

## åä¸€ã€å¼•æ–‡è§£ææ¨¡å—

### 11.1 æ¨¡å—æ¦‚è¿°

å¼•æ–‡è§£ææ¨¡å—ç”¨äºè§£ææ–‡çŒ®å¼•ç”¨æ–‡ä»¶ï¼ˆ.bibã€.risã€.enwï¼‰ï¼Œè‡ªåŠ¨æå–æ–‡çŒ®ä¿¡æ¯å¹¶å¡«å……é¡¹ç›®å…ƒæ•°æ®ã€‚

### 11.2 æ–‡ä»¶ç»“æ„

```
app/
â”œâ”€â”€ citation_parser.py   # å¼•æ–‡è§£ææ¨¡å—
```

### 11.3 CitationParser ç±»

```python
class CitationParser:
    """æ–‡çŒ®å¼•ç”¨è§£æå™¨"""
    
    SUPPORTED_FORMATS = ['.bib', '.ris', '.enw']
    
    def parse_file(self, file_path: str) -> List[Dict[str, Any]]:
        """è§£æå¼•æ–‡æ–‡ä»¶"""
        # æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨é€‰æ‹©è§£ææ–¹å¼
        # æ”¯æŒ BibTeXã€RISã€ENW æ ¼å¼
        
    def parse_content(self, content: str, format_type: str) -> List[Dict[str, Any]]:
        """ç›´æ¥è§£æå†…å®¹å­—ç¬¦ä¸²"""
        
    def citation_to_project(self, citation: Dict[str, Any]) -> Dict[str, Any]:
        """å°†å¼•æ–‡ä¿¡æ¯è½¬æ¢ä¸ºé¡¹ç›®æ•°æ®"""
```

### 11.4 æ”¯æŒçš„æ ¼å¼

| æ ¼å¼ | æ‰©å±•å | è¯´æ˜ |
|------|--------|------|
| BibTeX | .bib | LaTeX æ–‡çŒ®å¼•ç”¨æ ¼å¼ |
| RIS | .ris | ç ”ç©¶ä¿¡æ¯æ ‡å‡†æ ¼å¼ |
| ENW | .enw | EndNote å¼•ç”¨æ ¼å¼ |

### 11.5 API æ¥å£

```python
@app.route('/api/parse-citation', methods=['POST'])
def api_parse_citation():
    """è§£æå¼•æ–‡æ–‡ä»¶
    
    è¯·æ±‚:
    - Content-Type: multipart/form-data
    - file: å¼•æ–‡æ–‡ä»¶ (.bib, .ris, .enw)
    
    å“åº”:
    {
        "success": true,
        "count": 1,
        "citations": [{
            "citation": {...},  # åŸå§‹è§£æç»“æœ
            "project": {...}    # è½¬æ¢ä¸ºé¡¹ç›®æ•°æ®
        }]
    }
    """
```

### 11.6 å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¼•æ–‡è§£æå·¥ä½œæµç¨‹                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ (.bib/.ris/.enw)                               â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  2. å‰ç«¯ POST /api/parse-citation                               â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  3. åç«¯ä¿å­˜ä¸´æ—¶æ–‡ä»¶                                            â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  4. CitationParser è§£æå†…å®¹                                     â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  5. è½¬æ¢ä¸ºé¡¹ç›®æ•°æ®æ ¼å¼                                          â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  6. è¿”å›è§£æç»“æœ                                                â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  7. å‰ç«¯è‡ªåŠ¨å¡«å……è¡¨å•                                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.7 æå–çš„å­—æ®µ

| å¼•æ–‡å­—æ®µ | é¡¹ç›®å­—æ®µ | è¯´æ˜ |
|----------|----------|------|
| title | raw_title | æ–‡çŒ®æ ‡é¢˜ |
| author | (å¤„ç†ä¸­) | ä½œè€…åˆ—è¡¨ |
| year | - | å‡ºç‰ˆå¹´ä»½ |
| journal | - | æœŸåˆŠåç§° |
| doi | raw_DOI | DOI å· |
| abstract | raw_description | æ‘˜è¦ |
| keywords | raw_keywords | å…³é”®è¯ |

## åäºŒã€é”™è¯¯å¤„ç†

### 11.1 å‰ç«¯é”™è¯¯å¤„ç†

```javascript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
$.ajaxSetup({
    timeout: 30000,
    error: function(xhr, status, error) {
        showToast('è¯·æ±‚å¤±è´¥: ' + error, 'error');
    }
});

// Loading çŠ¶æ€ç®¡ç†
let loadingCount = 0;
function showLoading() {
    loadingCount++;
    if (loadingCount === 1) $('#loading').show();
}
function hideLoading() {
    loadingCount--;
    if (loadingCount <= 0) {
        loadingCount = 0;
        $('#loading').hide();
    }
}
```

### 11.2 åç«¯é”™è¯¯å¤„ç†

```python
@app.errorhandler(500)
def internal_error(error):
    return render_template('error.html', message="æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"), 500

@app.errorhandler(404)
def not_found_error(error):
    return render_template('error.html', message="é¡µé¢ä¸å­˜åœ¨"), 404
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 6.4  
**æ›´æ–°æ—¥æœŸ**: 2026-01-21  
**æŠ€æœ¯æ ˆ**: Python Flask + Jinja2 + Bootstrap 5 + MySQL  
**ä¸»è¦æ›´æ–°**: 
- æ–°å¢ 7.3 æ–‡ä»¶ç®¡ç†-ç®¡ç†é¡µé¢ï¼ˆå«ç­›é€‰æ¡ä»¶ã€å·²å¯¼å…¥é¡¹ç›®è¡¨æ ¼ã€åˆ—è¡¨æ’åºåŠŸèƒ½ï¼‰
- æ–°å¢ 7.4 æ–‡ä»¶ç®¡ç†-å¯¼å…¥é¡µé¢
- æ–°å¢ 7.5 é¡¹ç›®è¯¦æƒ…æ¨¡æ€æ¡†ï¼ˆå«æ–‡ä»¶åˆ—è¡¨æ’åºåŠŸèƒ½ï¼‰
- æ–°å¢ 7.6 æ–‡ä»¶æ“ä½œåŠŸèƒ½ï¼ˆåˆ é™¤ã€ä¸‹è½½ï¼‰
- æ–°å¢ 7.7 API æ¥å£è®¾è®¡
- ä¼˜åŒ–é¡¹ç›®ç¼–å·æ ¼å¼ä¸º RAW_XXXï¼ˆ8ä½UUIDï¼‰
- æ–‡ä»¶å¯¼å…¥åŠŸèƒ½å®Œå–„